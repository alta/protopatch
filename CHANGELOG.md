# Changelog

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/), and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [v0.5.1] — 2023-02-27

### Updated
- github.com/envoyproxy/protoc-gen-validate v0.6.2 → v0.9.1
- github.com/stretchr/testify v1.6.1 → v1.8.2
- golang.org/x/tools v0.1.7 → v0.6.0
- google.golang.org/grpc/cmd/protoc-gen-go-grpc v1.1.0 → v1.2.0
- google.golang.org/protobuf v1.27.1 → v1.28.1
- (other indirect dependencies)

## [v0.5.0] — 2021-11-01

### Added
- [#61](https://github.com/alta/protopatch/pull/61): specify the Go type for a message field. Specify `(go.field).type = "SomeType"` to override the field type in generated Go code. The specified type *must* be castable to the field’s native type, and defined in the target package. Scalar and repeated fields are supported, e.g. `type Things []Thing`. This feature is similar to the [`casttype`](https://github.com/gogo/protobuf/blob/master/extensions.md#more-canonical-go-structures) feature in gogoprotobuf.
- [#65](https://github.com/alta/protopatch/pull/65): add `optional` [support for proto3](https://github.com/protocolbuffers/protobuf/blob/master/docs/implementing_proto3_presence.md).

### Updated
- github.com/envoyproxy/protoc-gen-validate v0.6.1 → v0.6.2
- golang.org/x/tools v0.1.6 → v0.1.7
- Updated go.mod to Go 1.17 format

## [v0.4.0] — 2021-09-23

### Added
- [#56](https://github.com/alta/protopatch/pull/56): embedded message fields. Set `(go.field).embed = true` to embed a message field in the generated Go struct. The resulting field will be a pointer to and sharing a name with the generated Go struct.

### Updated
- github.com/envoyproxy/protoc-gen-validate v0.6.0 → v0.6.1 (reverted breaking API change)
- golang.org/x/tools v0.1.0 → v0.1.6
- google.golang.org/protobuf v1.26.0 → v1.27.1

## [v0.3.4] — 2021-04-23

### Updated
- Removed dependency on github.com/golang/protobuf
- github.com/envoyproxy/protoc-gen-validate v0.5.1 → v0.6.0

## [v0.3.3] — 2021-03-18

### Updated
- github.com/envoyproxy/protoc-gen-validate v0.4.1 → v0.5.0
- github.com/golang/protobuf v1.4.3 → v1.5.1
- golang.org/x/tools v0.0.0-20201223225330-bdbb3c917f0b → v0.1.0
- google.golang.org/protobuf v1.25.0 → v1.26.0
- protoc v3.14.0 → v3.15.6

## [v0.3.2] — 2021-03-12

### Fixed
- Scan Go packages in a deterministic order (FIFO) to fix a flaky recurrence of a bug related to the fix for [#40](https://github.com/alta/protopatch/issues/40).

## [v0.3.1] — 2021-03-11

### Fixed
- [#40](https://github.com/alta/protopatch/issues/40): enum values renamed with `go.lint` are now usable when imported into another proto file.

## [v0.3.0] — 2021-01-04

### Added
- [#37](https://github.com/alta/protopatch/pull/32): new file-level `go.lint` option. When specified, `protoc-gen-go-patch` will attempt to fix generated Go names to their idiomatic equivalents, e.g. `Id` → `ID`, `Url` → `URL`, etc. It will also eliminate stutter from enum values, e.g. `Foo_FOO_UNKNOWN` → `FooUnknown`. Thanks to [@Green7](https://github.com/Green7) for the initial implementation in [#22](https://github.com/alta/protopatch/pull/22).
- File-level `(go.lint).initialisms` option to specify your own initialisms for `go.lint`. Example: `(go.lint).initialisms = 'RGB'; // Lints RgbColor to RGBColor`. You may specify as many custom initialisms as needed. They will only affect identifiers declared in that file.

### Fixed
- Enum values nested under renamed messages will now be correctly renamed.

## [v0.2.0] — 2020-12-28

### Breaking Changes
- Renamed the `stringer_name` option to `stringer` to match the Go [`fmt.Stringer`](https://golang.org/pkg/fmt/#Stringer) interface. For backwards compatibility, `stringer_name` will be supported for at least 6 months.

### Added
- Struct tags, including defaults generated by `protoc-gen-go` can be replaced. The struct tag code was overhauled using the terrific [`structtag`](https://github.com/fatih/structtag) package by [@fatih](https://github.com/fatih). Thanks to [@liov](https://github.com/liov) for the initial prototype in [#15](https://github.com/alta/protopatch/pull/15).
- Updated docs, examples, and tests to use concise option syntax instead of `{}` delimited options.
- Rudimentary tests for `proto2` extension patching.

### Fixed
- [#21](https://github.com/alta/protopatch/issues/21) — It is now possible to patch output of other plugins like [`protoc-gen-validate`](https://github.com/envoyproxy/protoc-gen-validate).

## [v0.1.0] — 2020-12-23

### Known Issues
- [#21](https://github.com/alta/protopatch/issues/21) — Running `protoc` plugins other than `go` breaks on missing symbols.
- [#15](https://github.com/alta/protopatch/pull/15) — It’s not currently possible to mix or replace existing generated struct tags.

[Unreleased]: <https://github.com/alta/protopatch/compare/v0.5.1...HEAD>
[v0.5.1]: <https://github.com/alta/protopatch/compare/v0.5.0...v0.5.1>
[v0.5.0]: <https://github.com/alta/protopatch/compare/v0.4.0...v0.5.0>
[v0.4.0]: <https://github.com/alta/protopatch/compare/v0.3.4...v0.4.0>
[v0.3.4]: <https://github.com/alta/protopatch/compare/v0.3.3...v0.3.4>
[v0.3.3]: <https://github.com/alta/protopatch/compare/v0.3.2...v0.3.3>
[v0.3.2]: <https://github.com/alta/protopatch/compare/v0.3.1...v0.3.2>
[v0.3.1]: <https://github.com/alta/protopatch/compare/v0.3.0...v0.3.1>
[v0.3.0]: <https://github.com/alta/protopatch/compare/v0.2.0...v0.3.0>
[v0.2.0]: <https://github.com/alta/protopatch/compare/v0.1.0...v0.2.0>
[v0.1.0]: <https://github.com/alta/protopatch/tree/v0.1.0>
